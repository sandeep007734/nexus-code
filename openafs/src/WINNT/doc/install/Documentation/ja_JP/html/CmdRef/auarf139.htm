<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    -->
<BODY bgcolor="ffffff">
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRFS_EXPORTAFS" HREF="auarf002.htm#ToC_153">fs exportafs</A></H2>
<A NAME="IDX4796"></A>
<A NAME="IDX4797"></A>
<A NAME="IDX4798"></A>
<A NAME="IDX4799"></A>
<A NAME="IDX4800"></A>
<A NAME="IDX4801"></A>
<A NAME="IDX4802"></A>
<A NAME="IDX4803"></A>
<A NAME="IDX4804"></A>
<A NAME="IDX4805"></A>
<P><STRONG>目的</STRONG>
<P>マシンが AFS を別のファイル・システムのクライアントにエクスポートできるかどうか報告または設定を行います。
<P><STRONG>構文</STRONG>
<PRE><B>fs exportafs -type</B> &lt;<VAR>exporter name</VAR>>
        [<B>-start</B> &lt;<VAR>start/stop translator (on | off)</VAR>>]
        [<B>-convert</B> &lt;<VAR>convert from afs to unix mode (on | off)</VAR>>]
        [<B>-uidcheck</B> &lt;<VAR>run on strict 'uid check' mode (on | off)</VAR>>]
        [<B>-submounts</B> &lt;<VAR>allow nfs mounts to subdirs of /afs/.. (on | off)</VAR>>]
        [<B>-help</B>]

<B>fs exp -t</B> &lt;<VAR>exporter name</VAR>>
       [<B>-st</B> &lt;<VAR>start/stop translator (on | off)</VAR>>]
       [<B>-c</B> &lt;<VAR>convert from afs to unix mode (on | off)</VAR>>]
       [<B>-u</B> &lt;<VAR>run on strict 'uid check' mode (on | off)</VAR>>]
       [<B>-su</B> &lt;<VAR>allow nfs mounts to subdirs of /afs/.. (on | off)</VAR>>]
       [<B>-help</B>]
</PRE>
<P><STRONG>構文</STRONG>
<P><B>fs exportafs</B> コマンドは、マシンが AFS ファイル・スペースを AFS ファイル・システム以外のクライアントに再エクスポートできるかどうかを設定 (<B>-start</B> 引き数が使用されている場合) または報告 (その引き数が省略された場合) します。変換プロトコルのいくつかの機能を制御するには、次の引き数を使用します。
<UL>
<LI>AFS ファイルまたはディレクトリーの UNIX の <B>group</B> および <B>other</B> モード・ビットが、その AFS ファイルまたはディレクトリーが非 AFS ファイル・システムにエクスポートされる場合に、<B>owner</B> モード・ビットと一致するように設定するかどうかを制御するには、<B>-convert</B> 引き数を使用します。
</LI><LI>信用証明書構造体にトークンを入れるエンティティーのローカル UID とは異なる
UID で識別された信用証明書構造体にトークンを入れることができるかどうかを制御するには、
<B>-uidcheck</B> 引き数を使用します。ほとんどに共通する使用方法は、
<B>knfs</B> コマンドの発行者が、
NFS/AFS 変換プログラム・マシンのローカル UID と一致しない
<B>-id</B> 引き数に値を指定できるかどうかを制御することです。
</LI><LI>ユーザーが、AFS 以外のファイル・スペースのマウントを、
<B>/afs</B> 以外の AFS ディレクトリーに作成できるかどうかを制御するには、
<B>-submounts</B> 引き数を使用します。
</LI></UL>
<P><STRONG>オプション </STRONG>
<DL>
<P><DT><B>-type
</B><DD>AFS ファイル・スペースを再エクスポートする代替ファイル・システムを指定します。許容値は <B>nfs</B> だけで、英小文字のみとなります。
<P><DT><B>-start
</B><DD>値が <B>on</B> の場合は、ローカル・マシンが AFS ファイル・スペースを再エクスポートできるようにし、値が <B>off</B> の場合には再エクスポートできないようにします。すべての構成可能なパラメーターの現在の設定を報告するには、この引き数を省略してください。
<P><DT><B>-convert
</B><DD>非 AFS ファイル・システムにエクスポートされる AFS ファイルとディレクトリーに対する UNIX の <B>group</B> と <B>other</B> のモード・ビットの設定を制御します。この値が <B>on</B> の場合は、<B>owner</B> モード・ビットに一致するように設定されます。この値が <B>off</B> の場合は、ビットは変更されません。この引き数が省略された場合、デフォルト値は <B>on</B> です。
<P><DT><B>-uidcheck
</B><DD>信用証明書構造体にトークンを入れるエンティティーのローカル UID とは異なる
UID で識別された信用証明書構造体にトークンを入れることができるかどうかを制御します。
<UL>
<LI>値が <B>on</B> の場合には、信用証明書構造体を識別する UID は、ローカル UID と一致します。
<P>
<P><B>knfs</B> コマンドに関しては、この値は、<B>-id</B> 引き数の値が、変換プログラム・マシンでの発行者のローカル UID と一致しなければならないことを意味します。実際に、この設定値は、<B>-id</B> 引き数を
<B>knfs</B> コマンドに組み込むことを無意味にします。それは、<B>-id</B> 引き数を省略したときに、許容値 (発行者のローカル UID) だけがすでに使用されているからです。
<P>
<P>UID 検査を使用可能にすることによって、AFS がサポートするシステム・タイプであっても、
AFS 以外のファイル・システムのクライアント・マシンに、
<B>klog</B> コマンドおよび
<B>pagsh</B> コマンドも発行できるようにします。詳しくは、<B>klog</B> コマンドの参照ページを参照してください。
</LI><LI>値が <B>off</B> (デフォルト) の場合、トークンを割り当てているエンティティーのローカル UID と一致しない、
AFS 以外のファイル・システムのローカル UID にトークンを割り当てることができます。
<P>
<P><B>knfs</B> コマンドに関しては、変換プログラム・マシンでの発行者のローカル UID と一致しない、
NFS クライアント・マシンでのローカル UID にトークンを割り当てるために、発行者は <B>-id</B> 引き数を使用できることを意味します。
(たとえば、MFS クライアント・マシンのローカル・スーパーユーザー
<B>root</B> にトークンを割り当てる場合です。)
この設定値を使用すると、<B>knfs</B> コマンドの複数の発行者は、
NFS クライアント・マシンの同じユーザーにトークンを使用できるようにすることが可能です。異なるユーザーが <B>-id</B> 引き数を同じ値に設定して <B>knfs</B> コマンドを発行するたびに、そのユーザーのトークンは、既存のトークンを上書きします。この結果、NFS クライアント・マシンのユーザーが予測不能のアクセスを行う可能性があります。
</LI></UL>
<P><DT><B>-submounts
</B><DD>非 AFS ファイル・システムのユーザーが、AFS ファイル・システムに、最上位の <B>/afs</B> ディレクトリー以外のディレクトリーをマウントできるかどうかを制御します。この値が <B>on</B> の場合は、マウント可能です。値が off の場合には、<B>/afs</B> ディレクトリーのマウントは許可されません。この引き数が省略された場合のデフォルト値は <B>off</B> です。
<P><DT><B>-help
</B><DD>このコマンドのオンライン・ヘルプを出力します。これ以外の有効なオプションはすべて無視されます。
</DL>
<P><STRONG>出力</STRONG>
<P>マシンが非 AFS ファイル・システムのサーバーとしても構成されていない場合は、次のメッセージが表示されます。
<PRE>   Sorry, the <VAR>file_system</VAR>-exporter type is currently not supported on
   this AFS client

</PRE>
<P>マシンが非 AFS ファイル・システムのサーバーとして構成されてはいるけれども、現在そのマシンに AFS を再エクスポートできない場合 (このコマンドの <B>-start</B> 引き数が <B>on</B> に設定されていないため)、次のメッセージが表示されます。
<PRE>   '<VAR>file_system</VAR>' translator is disabled

</PRE>
<P>マシンが AFS を再エクスポートできる場合は、他のパラメーターの設定を報告するメッセージよりも前に、次のメッセージが表示されます。
<PRE>   '<VAR>file_system</VAR>' translator is enabled with the following options:

</PRE>
<P>次のメッセージは、<B>-convert</B> 引き数がそれぞれ、<B>on</B> または <B>off</B> に設定されていることを示しています。
<PRE>   Running in convert owner mode bits to world/other mode
   Running in strict unix mode

</PRE>
<P>次のメッセージは、<B>-uidcheck</B> 引き数がそれぞれ、<B>on</B> または <B>off</B> に設定されていることを示しています。
<PRE>   Running in strict 'passwd sync' mode
   Running in no 'passwd sync' mode

</PRE>
<P>次のメッセージは、<B>-submounts</B> 引き数がそれぞれ、<B>on</B> または <B>off</B> に設定されていることを示しています。
<PRE>   Allow mounts of /afs/.. subdirs
   Only mounts to /afs allowed

</PRE>
<P><STRONG>例</STRONG>
<P>次の例は、ローカル・マシンが AFS を NFS クライアント・マシンにエクスポート可能であることを示しています。
<PRE>   % <B>fs exportafs nfs</B>
   'nfs' translator is enabled with the following options:
        Running in convert owner mode bits to world/other mode
        Running in no 'passwd sync' mode
        Only mounts to /afs allowed

</PRE>
<P>次の例では、マシンを NFS サーバーとして使用可能にし、エクスポートされた AFS ディレクトリーおよびファイルの UNIX の <B>group</B> および <B>other</B> モード・ビットを変換して、
<B>owner</B> モード・ビットと一致するようにします。
<PRE>   % <B>fs exportafs -type nfs -start on -convert on</B>

</PRE>
<P>次の例では、マシンが AFS を NFS クライアント・マシンに再エクスポートできないようにしています。
<PRE>   %<B> fs exportafs -type nfs -start off</B>

</PRE>
<P><STRONG>必要となる特権</STRONG>
<P>コマンドの発行者は、ローカル・スーパーユーザー <B>root</B> としてログインする必要があります。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf200.htm#HDRKLOG">klog</A>
<P><A HREF="auarf201.htm#HDRKNFS">knfs</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf138.htm">前ページ</A> &#124; <A HREF="auarf140.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B>
<!-- Begin Footer Records  ========================================== -->
<P><HR><B>
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved
</B>
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
