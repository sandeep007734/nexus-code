<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>관리 안내서</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- c:\IDWBWIN\TEMP\idwt1054\Auagd000.scr converted by idb2h R4.2    -->
<!-- (359) ID Workbench Version (WINNT-WIN95) on 31 Dec 1999 at       -->
<!-- 09:23:05                                                         -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=euc-kr">
<META HTTP-EQUIV="updated" CONTENT="Fri, 31 Dec 1999 09:22:58">
<META HTTP-EQUIV="review" CONTENT="Sun, 31 Dec 2000 09:22:58">
<META HTTP-EQUIV="expires" CONTENT="Mon, 31 Dec 2001 09:22:58">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    -->
<BODY bgcolor="ffffff">
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>관리 안내서</H1>
<P>
<HR><H1><A NAME="HDRWQ595" HREF="auagd002.htm#ToC_666">부록 A. NFS/AFS 변환기 관리</A></H1>
<A NAME="IDX8162"></A>
<A NAME="IDX8163"></A>
<P>NFS<SUP><SUP>(R)</SUP></SUP>/AFS<SUP><SUP>(R)</SUP></SUP> 변환기를 사용하면 NFS 작업 시스템에서 작업하는 사용자들은
AFS에 저장된 파일을 액세스, 작성 및 제거할 수 있습니다. 이 장에서는
사용자가 NFS 및 AFS에 모두 익숙하다고 가정합니다.
<HR><H2><A NAME="HDRWQ596" HREF="auagd002.htm#ToC_667">명령 요약</A></H2>
<P>이 장에서는 지정된 명령을 사용하여 다음 타스크를 수행하는 방법을 설명합니다.
<BR>
<TABLE WIDTH="100%">
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="70%">변환 기계에 디렉토리 마운트
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="30%"><B>mount</B>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="70%"><B>@sys</B> 변수의 값 검토
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="30%"><B>fs sysname</B>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="70%">AFS의 재반출 사용 가능/사용 불가능화, 기타 매개변수 설정
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="30%"><B>fs exportafs</B>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="70%">NFS 클라이언트 시스템에서 사용자에게 AFS 토큰 지정
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="30%"><B>knfs</B>
</TD></TR></TABLE>
<HR><H2><A NAME="HDRWQ598" HREF="auagd002.htm#ToC_668">개요</A></H2>
<P>NFS/AFS 변환기를 사용하면 NFS 클라이언트 시스템의 사용자는 마치 AFS
클라이언트 시스템에서 작업하는 것처럼 AFS 파일 공간을 액세스하여 다른 AFS
사용자와 공동 작업에 참여할 수 있습니다.
<P><I>NFS/AFS 변환 기계</I>(또는 간단하게 <I>변환 기계</I>)는 AFS 클라이언트와 NFS 서버 모두로 구성된 시스템입니다.
<UL>
<LI>그 AFS 클라이언트 기능을 통해 AFS 파일 공간을 액세스할 수 있습니다. 캐쉬
관리 프로그램은 AFS 파일 서버 시스템에서 파일을 요청하고 캐쉬하며 NFS
사용자가 AFS에서 인증을 받을 수 있도록 구성을 변경할 경우 NFS 사용자를 위한
토큰을 유지할 수 있습니다.
</LI><LI>NFS 서버 기능을 통해 변환 기계는 AFS 파일 공간을 NFS 클라이언트 시스템으로
반출할 수 있습니다. NFS 클라이언트 시스템의 사용자가 변환 기계의 <B>/afs</B>
디렉토리(또는 이 기능이 사용 가능한 경우 그 하위 디렉토리 중 하나)를 마운트할 때
AFS로의 액세스가 즉각적이고 가시적으로 수행됩니다. NFS 클라이언트 시스템은
AFS 소프트웨어를 실행할 필요가 없습니다.
</LI></UL>
<P><H3><A NAME="HDRWQ599" HREF="auagd002.htm#ToC_669">비인증 또는 인증 AFS 액세스 사용 가능화</A></H3>
<P>변환 환경을 제대로 구성함으로써 NFS 클라이언트 시스템에서 AFS로의 비인증
또는 인증 액세스를 제공할 수 있습니다.
이 장에서 변환 기계, NFS 클라이언트 시스템 및 AFS 사용자 계정 구성에 대한
절에서는 변환 환경을 제대로 구성하는 방법을 설명합니다.
<UL>
<LI>비인증 액세스를 위한 환경을 구성하는 경우 AFS 파일 서버는 NFS 사용자를
사용자 <B>anonymous</B>로 간주합니다. 이들은 액세스 제어
목록(ACL)에서 <B>system:anyuser</B> 그룹에 대한 필수 권한을
확장한 AFS 파일 및 디렉토리에만 액세스할 수 있습니다. 이들은 권한을 필요로
하지 않으며 NFS 클라이언트 시스템이 <B>system:anyuser</B>
그룹에서 사용할 수 있고 액세스할 수 있는 AFS 2진 파일의 시스템 유형인
경우에만 해당 AFS 명령을 실행할 수 있습니다. 이러한 사용자에게는 AFS 계정이
없을 것입니다.
</LI><LI>인증 액세스에 대한 환경을 구성하는 경우 NFS 사용자에
대한 AFS 인증 및 보호 데이터베이스에 항목을 작성해야 합니다.
이들이 사용하는 인증 절차는 NFS 클라이언트 시스템이 지원되는
시스템 유형인지 여부에 따라 달라집니다(AFS 2진 파일이
사용 가능한 시스템 유형).
<UL>
<LI>AFS 2진 파일이 NFS 클라이언트 시스템에서 사용 가능한
경우 NFS 사용자들은 NFS 클라이언트 시스템에 대해
<B>klog</B> 명령을 실행할 수 있습니다. 이들은
파일 공간을 액세스하고 AFS 클라이언트 시스템에서 작업하는
인증된 사용자와 동일한 범위까지 AFS 명령을 실행할 수 있습니다.
</LI><LI>NFS 클라이언트 시스템에서 AFS 2진 파일을 사용할 수
없으면 NFS 사용자들은 변환 기계와 연결한
다음(예: <B>텔넷</B> 유틸리티 사용) 변환 기계에
대해 <B>klog</B> 및 <B>knfs</B>
명령을 실행하여 사용자가 NFS 클라이언트에서 작업하는 동안 캐쉬
관리 프로그램이 토큰을 제대로 사용할 수 있게 하십시오. 이들은
인증된 사용자로서 AFS 파일 공간을 액세스할 수 있으나 AFS 명령은
실행할 수 없습니다. 명령은 <A HREF="#HDRWQ612">지원되지 않는 NFS 클라이언트 시스템에서 인증 받기</A>를
참조하십시오.
</LI></UL>
</LI></UL>
<P><H3><A NAME="HDRWQ600" HREF="auagd002.htm#ToC_670">AFSSERVER 및 AFSCONF 환경 변수 설정</A></H3>
<P>NFS 사용자가 AFS 명령을 실행할 수 있게 하려면 명령 쉘에서
AFSSERVER 및 AFSCONF 환경 변수를 정의해야 합니다. 이 절에서는
변수의 기능을 설명하고 변수 설정을 위한 다양한 방법을
대략적으로 설명합니다.
<P>AFS 명령을 실행하기 위해서는 NFS 클라이언트 시스템이 지원되는
시스템 유형(AFS 2진 파일을 사용할 수 있고 액세스할 수
있음)이어야 합니다. 지원되는 시스템 유형을 가진 NFS 클라이언트
시스템에서 작업하는 사용자는 AFS를 인증된 사용자로 액세스할 수
있으나 AFS 명령은 실행할 수 없습니다. 이러한 사용자에 대해
AFSSERVER 및 AFSCONF 변수를 반드시 정의할 필요는 없습니다.
<B>knfs</B> 명령을 사용하여 지원되지 않는
시스템 유형에 대한 인증된 액세스 권한을 얻기 위한 지침을
보려면 <A HREF="#HDRWQ612">지원되지 않는 NFS 클라이언트 시스템에서 인증 받기</A>를 참조하십시오.
<A NAME="IDX8164"></A>
<P><H4><A NAME="HDRWQ601">AFSSERVER 변수</A></H4>
<P>AFSSERVER 변수는 NFS 클라이언트에 대해 다음의 두 가지 기능을 수행하는
AFS 클라이언트 시스템을 지정합니다.
<UL>
<LI>이 시스템은 <B>klog</B> 및 <B>tokens</B>
명령과 AFS 집합의 여러 명령에 의해 호출되는 것과 같이, AFS 특정 시스템 호출을
실행하여 NFS 클라이언트의 <I>원격 실행 프로그램</I>으로
작동합니다.
</LI><LI>NFS 사용자가 AFS에서 인증을 받을 때 얻는 토큰을 저장합니다. 이것은
사용자가 AFS에 대한 인증된 액세스 권한을 요구할 경우 원격 실행 프로그램과
변환 기계가 동일해야 함을 의미합니다.
</LI></UL>
<P>어떤 원격 실행 프로그램을 사용하느냐는
<B>fs getcacheparms</B>,
<B>fs getcellstatus</B> 및
<B>fs setcell</B> 명령과 같은 캐쉬 관리
프로그램 구성을 표시하거나 변경하는 명령에 직접적으로 영향을
미칩니다. NFS 클라이언트에 대해 이들 명령이 실행되면
지정된 원격 실행 프로그램 기계의 캐쉬 관리 프로그램에 영향을
미칩니다(그러나 이러한 일부 명령을 사용하기 위해서는 로컬
수퍼유저 <B>루트</B>와 같이 실행자가 원격 실행
프로그램의 로컬 파일 시스템에 로그인해야 합니다. NFS 클라이언트
사용자가 <B>루트</B>로서 로그인해야 하는 기능은
NFS/AFS 변환기에 의해서가 아니라 NFS에 의해 제어되므로 원격 실행
프로그램을 제대로 설정한다고 해서 NFS 클라이언트의 사용자들이
이러한 명령을 반드시 실행할 수 있음을 의미하지는 않습니다).
<P>이 원격 실행 프로그램을 선택하는 것은 특정 캐쉬 관리 프로그램을
수행하지 않는 AFS 명령에 대해서는 적절하지만 ACL 및 볼륨
할당량을 표시하거나 설정하는 <B>fs</B> 명령과
같이 모든 시스템에서 동일한 결과를 가져옵니다. 이러한 명령은
그 인수 중 하나로서 AFS 경로를 취합니다. 원격 실행 프로그램
기계의 캐쉬 관리 프로그램이 AFS 클라이언트에 있어서 일반적인
것처럼 <B>/afs</B> 디렉토리에 AFS 파일 공간을
마운트하는 경우 NFS 클라이언트에 지정된 경로 이름은 문자열
<B>/afs</B>로 시작되어야만 캐쉬 관리 프로그램이
이 경로 이름을 이해할 수 있습니다. 이것은 원격 실행 프로그램이
NFS 클라이언트의 기본 변환 기계(그 <B>/afs</B>
디렉토리가 NFS 클라이언트의 <B>/afs</B>에
마운트된 기계)여야 함을 의미합니다.
<A NAME="IDX8165"></A>
<A NAME="IDX8166"></A>
<P><H4><A NAME="Header_672">AFSCONF 변수</A></H4>
<P>AFSCONF 환경 변수는 NFS 클라이언트 시스템에 대해 AFS 명령이 실행될 때
<B>ThisCell</B> 및 <B>CellServDB</B> 파일이
있는 디렉토리를 명명합니다. AFS 클라이언트에 있는 것처럼 이들 파일은
명령 실행의 기본 셀을 결정합니다.
<P>성능을 예측하기 위해서는 AFSCONF 변수라는 디렉토리의 파일이
변환 기계의 <B>/usr/vice/etc</B> 디렉토리에 있는 파일과
일치하는 것이 바람직합니다. 셀에 <B>/usr/vice/etc</B> 디렉토리의
파일에 대한 중앙 갱신 원본으로 작동하는 AFS 디렉토리가 있는 경우
AFSCONF 변수가 이를 참조하도록 설정하는 것이 가장 간단한 방법입니다.
일반적인 구성에서 이 디렉토리를 <B>/afs/</B><VAR>cellname</VAR><B>/common/etc</B>라고
명명합니다.
<P><H4><A NAME="Header_673">변수 값 설정</A></H4>
<P>AFSSERVER 및 AFSCONF 변수의 값을 알려면 AFS 명령 인터프리터는 다음의
세 가지 원본을 순서대로 확인합니다.
<OL TYPE=1>
<LI>현재 명령 쉘의 환경 변수 정의
</LI><LI>실행자의 홈 디렉토리에 있는 <B>.AFSSERVER</B> 또는
<B>.AFSCONF</B> 파일
</LI><LI>NFS 클라이언트 시스템의 루트(<I>/</I>) 디렉토리에 있는
<B>/.AFSSERVER</B> 또는 <B>/.AFSCONF</B> 파일.
클라이언트 시스템이 디스크없는 시스템이면 그 루트 디렉토리는 NFS 서버 시스템에
위치해야 합니다.
</LI></OL>
<P>(실제로 이러한 원본을 참고하기 전에 NFS 클라이언트는 자체의
<B>/usr/vice/etc</B> 디렉토리에서
<B>CellServDB</B> 및 <B>ThisCell</B>
파일을 찾아 봅니다. 이 디렉토리가 있으면 NFS 클라이언트는 AFSCONF 변수의
값을 사용하지 않습니다. 그러나 <B>/usr/vice/etc</B> 디렉토리는
대개 AFS 클라이언트에만 있습니다 (NFS 클라이언트에는 없음).
<P>앞서 자세히 설명한 것처럼 올바른 성능을 유지하기 위해서는
원격 실행 프로그램 기계가 NFS 클라이언트의 기본 변환
기계(그 <B>/afs</B> 디렉토리가 NFS 클라이언트의
<B>/afs</B> 디렉토리에 마운트된 시스템)에
있어야 합니다. 이 요구사항은 NFS 클라이언트에서 AFS를
액세스하는 모든 사용자에게 유효하므로 NFS 클라이언트의 루트
디렉토리에 <B>.AFSSERVER</B> 파일을 작성하는
것이 가장 간단합니다. 사용자의 홈 디렉토리에 이 파일을
작성하거나 현재의 명령 쉘에 AFSSERVER 환경 변수를 설정하는
기본 이유는 사용자가 원래의 변환 기계를 액세스할 수
없게 되므로 다른 변환 기계로 전환해야 한다는 것입니다.
<P>이와 마찬가지로 NFS 클라이언트의 루트 디렉토리에 <B>.AFSCONF</B> 파일을 작성하는 것이 일반적입니다. 사용자의 홈 디렉토리에 이 파일을
작성하거나 현재의 명령 쉘에 AFSCONF 환경 변수를 설정하는 것은 테스트 상황에서
셀에 대해 다른 데이터베이스 서버 시스템 집합을 지정하려는 경우에 가장
유용합니다.
<P><H3><A NAME="HDRWQ602" HREF="auagd002.htm#ToC_674">NFS 클라이언트 시스템에 저장된 파일에 대한 지연된 쓰기</A></H3>
<A NAME="IDX8167"></A>
<A NAME="IDX8168"></A>
<A NAME="IDX8169"></A>
<A NAME="IDX8170"></A>
<A NAME="IDX8171"></A>
<A NAME="IDX8172"></A>
<A NAME="IDX8173"></A>
<P>AFS 클라이언트 시스템에서 실행되는 응용프로그램이 파일에
대해 <B>close</B> 또는 <B>fsync</B>
시스템 호출을 실행할 때 캐쉬 관리 프로그램은 기본적으로
파일 서버로의 동기 데이터 쓰기를 수행합니다(자세한 설명은
<A HREF="auagd007.htm#HDRWQ33">AFS에서 구현하는 닫을 때 저장</A> 및
<A HREF="auagd015.htm#HDRWQ418">비동기 기록 가능</A>을 참조하십시오).
<P>변환 기계에서 작업하는 AFS 사용자의 성능 저하를 막기 위해 AFS는
변환 기계의 NFS 클라이언트에서 실행되는 응용 프로그램에 대해
동기 쓰기를 수행하지 않습니다. 대신 캐쉬 관리 프로그램 디먼
중 하나(<I>유지보수 디먼</I>)가 NFS 클라이언트에
저장된 데이터가 들어 있는 캐쉬에서 60초마다 청크를 확인하고
그 내용을 파일 서버에 기록합니다. 이것인 NFS 클라이언트에
저장된 데이터가 60초마다 파일 서버에 기록됨을 의미하지는 않으나
유지보수 디먼이 이 간격으로 청크를 확인하고 데이터 쓰기를
시작함을 의미합니다.
<P>더욱이 AFS에서는 항상 NFS 클라이언트에 대해 실행된
<B>fsync</B> 시스템 호출을 무시합니다. 이 호출은
파일 서버로부터의 즉각적이고 시간 소모적인 응답을 요구하며
이로 인해 파일 서버의 다른 AFS 클라이언트에서 지연이 초래될
수 있습니다. NFS 버전 3은 <B>close</B> 호출
이후에 바로 <B>fsync</B> 시스템 호출을 실행하지만
캐쉬 관리 프로그램은 이를 무시하고 일반 <B>close</B>와
같이 이 조작을 처리합니다.
<P>지연된 쓰기 메카니즘은 NFS 응용 프로그램이 파일에 대해
<B>close</B> 또는 <B>fsync</B>
시스템 호출을 실행하는 시간과 다른 AFS 클라이언트 시스템에서
작업하는(직접적으로 또는 NFS 클라이언트에서) 사용자들이
이 변경사항을 볼 수 있는 때를 나타내는 파일 서버에 변경 내용이
기록되는 시간 사이에 지연이 있음을 의미합니다. 이 지연은
AFS 클라이언트 시스템에서 직접 작업하는 사용자들이 저장한
파일의 경우보다 더 오래 지속될 수 있습니다.
<P>정확한 지연 시간은 예측하기 어렵습니다. NFS 프로토콜 자체는
저장된 데이터가 NFS 클라이언트에서 NFS 서버(변환 기계)로
전송되기 전에 표준 지연 시간을 허용합니다. 수정된 데이터는
이러한 작업에 대해 예정된 유지보수 디먼의 다음 확인 작업
시간에 도달할 때까지 변환 기계의 AFS 클라이언트 시스템에
유지되며 이 데이터를 파일 서버에 전송하는 데는 추가 시간이
필요합니다. 유지보수 디먼은 단일 스레드를 사용하므로 수정된
모든 NFS 데이터를 쓰기 위해 60초 이상의 시간이 걸리는 경우
추가 지연이 발생할 수 있습니다. 따라서 예정된 다음 확인
작업 시간에 유지보수 디먼이 여전히 데이터를 기록하고 있으면
긴 쓰기 조작을 완료한 후에 예정된 시간이 될 때까지 추가적으로
수정된 데이터가 있다는 사실을 알지 못합니다.
<P><B>write</B> 시스템 호출에 대한 캐쉬 관리
프로그램의 응답은 이 호출이 AFS 클라이언트 시스템에 대해
실행되었는지 변환 기계의 NFS 클라이언트에 대해 실행되었는지에
관계없이 동일합니다. 수정 내용은 로컬 AFS 클라이언트 캐쉬에만
기록됩니다.
<HR><H2><A NAME="HDRWQ603" HREF="auagd002.htm#ToC_675">NFS/AFS 변환기 기계 구성</A></H2>
<P>NFS/AFS 변환 기계로 작동하려면 시스템이 다음과 같이 구성되어야
합니다.
<UL>
<LI>AFS 클라이언트여야 합니다. AFS 클라이언트에서 지원하는
여러 시스템 유형이 변환 기계가 될 수 있습니다. AFS의 특정
릴리스에만 국한되는 제한사항을 보려면 <I>AFS 릴리스 노트</I>를 참조하십시오.
</LI><LI>NFS 서버여야 합니다. 적절한 수의 NFS 서버
디먼(<B>nfsd</B> 및 기타)은 예상되는 NFS
클라이언트 로드에 따라 달라집니다.
</LI><LI>일반적으로 <B>/afs</B>에 해당하는 AFS 파일 공간이
마운트된 로컬 디렉토리를 반출해야 합니다.
</LI></UL>
<P>변환 기계의 NFS 클라이언트에 있는 사용자가 AFS 명령을
실행해야 하는 경우 변환 기계는 <A HREF="#HDRRMTSYS">AFS 명령을 수용하도록 변환 기계 구성</A>에
나오는 요구사항을 충족시켜야 합니다.
<P><H3><A NAME="Header_676" HREF="auagd002.htm#ToC_676">NFS 및 AFS 커널 확장 로드</A></H3>
<P>NFS/AFS 변환 기계로 작동할 수 있는 시스템 유형에 대한 AFS 분산은 보통
커널이 NFS 서버 기능을 지원하는 시스템에 대한 버전과 NFS를 사용하지 않는
시스템에 대한 버전의 두 가지 버전의 AFS 커널 확장 파일을 포함합니다.
(두 번째 AFS 커널 확장 파일은 보통 그 이름이 문자열 <B>nonfs</B>를
포함함). 변환 기계는 AFS 확장 파일의 NFS 사용 가능 버전을 사용해야 합니다.
일부 시스템 유형에서 적절한 파일을 선택하여 특정 위치로 옮겨야 하지만 다른 시스템
유형에서는 올바른 파일의 자동 선택을 수행하는 변수를 설정해야 합니다.
AFS를 각 시스템 유형의 커널에 통합하는 방법에 대해서는 <I>AFS 빠른 시작</I>의
지침을 참조하십시오.
<P>많은 시스템 유형에서 NFS가 기본적으로 커널에 포함되어 있으므로 반드시 NFS 커널
확장을 명시적으로 로드할 필요는 없습니다. NFS 확장을 로드해야 하는 시스템
유형에서는 보통 AFS 커널 확장을 로드하기 전에 NFS 확장을 로드해야 합니다.
<I>AFS 빠른 시작</I>에서는 NFS를 처리하는 스크립트에 맞게 올바르게 정렬되도록
AFS 초기설정 스크립트를 시스템의 시작 순서에 통합하는 방법을 설명합니다.
<P>또한 AFS 확장은 <B>afsd</B> 명령이 실행되기 전에 커널에
로드되어야 합니다. AFS 분산에 포함된 AFS 초기설정 스크립트는 로드 및
<B>afsd</B> 명령 실행의 순서를 적절히 조정합니다.
<P><H3><A NAME="HDRRMTSYS" HREF="auagd002.htm#ToC_677">AFS 명령을 수용하도록 변환 기계 구성</A></H3>
<P>변환 기계의 NFS 클라이언트에서 작업하는 사용자가 AFS 명령을 실행하기 위해서는
<B>-rmtsys</B> 플래그가 변환 기계의 캐쉬 관리 프로그램을
초기화하는 <B>afsd</B> 명령에 포함되어야 합니다. 이 플래그는
NFS 클라이언트 대신 AFS 특정 시스템 호출을 실행하는 추가
디먼(<I>원격 실행 프로그램 디먼</I>)을 시작합니다.
AFS 명령을 실행하는 NFS 사용자에 대한 설명을 보려면 <A HREF="#HDRWQ600">AFSSERVER 및 AFSCONF 환경 변수 설정</A>을
참조하십시오.
<P><I>AFS 빠른 시작</I>에서 캐쉬 관리 프로그램을 구성하기 위한 지침은 AFS 초기설정 스크립트에서
<B>afsd</B> 명령에 대해 <B>-rmtsys</B>
플래그와 같은 옵션을 추가하는 방법을 설명합니다.
많은 시스템 유형에서 OPTIONS 변수를 정의하는 스크립트의
행에 이 플래그를 나열하는 것이 가장 쉬운 방법입니다. 원격 실행 프로그램
디먼은 많은 자원을 소모하지 않으므로 시스템의 NFS 클라이언트의 모든
사용자가 AFS 명령을 실행하는 것은 아니라고 해도 이 디먼을 모든 변환 기계의
<B>afsd</B> 명령에 추가하는 것이 가장 쉽습니다.
<P><H3><A NAME="HDRWQ604" HREF="auagd002.htm#ToC_678">선택적 변환 기능 제어</A></H3>
<P>AFS 클라이언트 시스템은 변환 기계로 구성된 후에 기본적으로 AFS 파일
공간을 NFS 클라이언트로 반출합니다. <B>fs exportafs</B> 명령의
<B>-start</B> 인수를 사용하여 변환 기능을 사용 불가능화하고
다시 사용 가능화할 수 있습니다. 이 명령의 다른 인수는 변환 동작의 다른
측면을 제어합니다.
<UL>
<LI><B>-convert</B> 인수는 NFS로 반출되는 AFS 파일이나
디렉토리에 대한 UNIX 모드 비트의 두 번째 및 세 번째(<B>group</B>
및 <B>other</B>) 집합이 첫 번째(<B>owner</B>)
모드 비트와 일치하는지 여부를 제어합니다. 기본적으로 이들 모드 비트는 일치하도록
설정되어 있습니다.
<P>
<P>AFS와는 달리 NFS는 파일이 AFS에 저장된 경우에도 사용자가 이 파일을 읽거나
쓸 수 있는지 여부를 결정할 때 세 가지의 모드 비트 집합을 사용합니다.
일부 AFS 파일에서는 <B>group</B> 및 <B>other</B>
모드 비트가 설정되어 있지 않습니다. 왜냐하면 AFS가 파일의 디렉토리에 대한
ACL과 함께 <B>owner</B> 비트만 사용하기 때문입니다.
<B>owner</B> 모드 비트만 설정되어 있는 경우 NFS는 파일의 소유자만
파일을 읽고 쓸 수 있게 허용합니다. <B>-convert</B> 인수를
<B>on</B> 값으로 설정하면 다른 사용자가 소유자와 동일한
방식으로 파일을 액세스할 수 있습니다. 값 <B>off</B>를
설정하면 AFS에 저장된 파일에 설정된 모드 비트가 그대로 유지됩니다.
</LI><LI><B>-uidcheck</B> 인수는 NFS 클라이언트 시스템의 그 로컬
UID가 변환 기계의 토큰과 연관된 로컬 UID와 다른 NFS 사용자에게 토큰이
지정될 수 있는지 여부를 제어합니다.
기본적으로 이것은 가능합니다.
<P>
<P>이 값을 <B>on</B>으로 설정하여 UID 확인을 사용 가능하게
하는 경우 토큰은 그 로컬 UID가 토큰을 지정하고 있는 변환 기계의 프로세스의
로컬 UID와 일치하는 NFS 사용자에게만 지정될 수 있습니다. 한 가지 결과는
<B>-id</B> 인수를 <B>knfs</B> 명령에
포함시킬 필요가 없다는 것입니다. 즉 허용되는 유일한 값은 명령 실행자의
로컬 UID이며 이 값은 <B>-id</B> 인수가 생략될 때 사용되는
값입니다. 이러한 방식으로 UID를 일치시키는 것은 사용자가 NFS 클라이언트
시스템에서와 같이 변환 기계에도 동일한 UID를 가지고 있을 때만 효과를 발휘합니다.
이 경우 사용자는 NFS 세션에만 자신의 토큰을 지정하게 됩니다. 명령은
<A HREF="#HDRWQ612">지원되지 않는 NFS 클라이언트 시스템에서 인증 받기</A>를 참조하십시오.
<P>
<TABLE><TR><TD ALIGN="LEFT" VALIGN="TOP"><B>주:</B></TD><TD ALIGN="LEFT" VALIGN="TOP">UID 확인 기능을 설정하면 지원되는 NFS 클라이언트에 있는 사용자는
<B>klog</B> 명령을 사용하여 NFS 클라이언트에서 직접 인증을
받을 수 없게 됩니다. 이들은 대신 변환 기계에서 인증을 받아야 하며
<B>knfs</B> 명령을 사용해야 합니다. 이것은 <B>klog</B>
명령 인터프리터가 NFS 클라이언트에 대한 토큰을 얻은 후에 이를 캐쉬 관리 프로그램의
원격 실행 프로그램 디먼으로 전달하며 이 원격 실행 프로그램 디먼은 토큰을 변환
기계의 자격사항 구조에 저장하는 시스템 호출을 생성하기 때문입니다.
원격 실행 프로그램은 보통 로컬 수퍼유저 <B>루트</B>로서
실행되므로 대부분의 경우에 로컬 UID(보통 0)가 NFS 클라이언트 시스템에 대해
<B>klog</B> 명령을 실행한 사용자의 로컬 UID와 일치하지
않습니다.
<P>
<P>한편 <B>klog</B> 명령 대신 <B>knfs</B>
명령을 사용하는 것은 덜 편리하기는 하지만 보안에 노출된 위험을 줄여 줍니다.
<B>klog</B> 명령 인터프리터는 네트워크를 통해 원격 실행
프로그램 디먼으로 토큰을 명확한 텍스트 모드로 전송합니다.
</TD></TR></TABLE>
<P>
<P>값 <B>off</B>를 지정하여 UID 확인 기능을 사용 불가능하게
하면 <B>knfs</B> 명령의 실행자는 로컬 수퍼유저
<B>루트</B>와 같이 NFS 클라이언트 시스템에 다른 UID를 가지고
있는 사용자에게 토큰을 지정할 수 있습니다. 실제로 <B>knfs</B> 명령의 두 명 이상의 실행자가 NFS 클라이언트 시스템에 있는 동일한
사용자에게 토큰을 지정할 수 있습니다.
다른 사용자가 <B>-id</B> 인수에 대해 같은 값을 사용하여
<B>knfs</B> 명령을 실행할 때마다 이 사용자의 토큰은 기존의
토큰을 덮어씁니다. 이로 인해 NFS 사용자가 예측치 못한 상황에서 액세스하는
경우가 발생할 수 있습니다.
</LI><LI><B>-submounts</B> 인수는 NFS 클라이언트의 사용자가
최상위의 <B>/afs</B> 디렉토리 이외의 AFS 디렉토리에 마운트할 수
있는지 여부를 제어합니다. 기본적으로 변환 기계는 이러한 서브마운트를 허용하지
않습니다.
<P>
<P>서브마운트는 몇 가지 상황에서 유용할 수 있습니다. 예를 들어 NFS 사용자가
자신의 AFS 홈 디렉토리에만 액세스해야 하는 경우 이 홈 디렉토리에 대한
서브마운트를 작성하면 이들이 완전한 경로를 알거나 입력해야 할 필요가
없어집니다. 이와 마찬가지로 서브마운트를 사용하여 서브마운트보다 AFS
계층에서 더 높은 수준에 있는 파일 공간의 부분을 사용자가 액세스하지
못하게 됩니다.
</LI></UL>
<P><H3><A NAME="Header_679" HREF="auagd002.htm#ToC_679">NFS/AFS 변환 기계를 구성하려면</A></H3>
<P>다음 지침은 사용자가 AFS 명령을 실행할 수 있도록 변환 기계를 구성합니다.
이 기능을 사용 가능하지 않으려면 단계 <A HREF="#LIWQ605">6</A>을 생략하십시오.
<OL TYPE=1>
<LI>시스템에서 로컬 수퍼유저 <B>루트</B>가 아닌 경우
<B>su</B> 명령을 실행하여 이러한 권한을 얻으십시오.
<P>
<PRE>   % <B>su root</B>
   Password: <VAR>root_password</VAR>
</PRE>
</LI><LI>아직 수행하지 않은 경우 NFS/AFS 변환 기계를 NFS 서버로 구성하십시오.
NFS 공급업체가 제공하는 지침을 따르십시오. 적절한 수의 NFS 서버 디먼(예:
<B>nfsd</B>)은 예상되는 NFS 클라이언트의 수에 따라
달라집니다.
</LI><LI>아직 수행하지 않은 경우 NFS/AFS 변환 기계를 AFS 클라이언트로 구성하십시오.
적절한 성능을 유지하기 위해 변환 기계의 <B>/usr/vice/etc/CellServDB</B>
및 <B>/usr/vice/etc/ThisCell</B> 파일의 로컬 사본은 셀의
다른 클라이언트 시스템에서와 동일해야 합니다.
</LI><LI><A NAME="LITRANS-MOUNTFILE"></A>원격 NFS 클라이언트에 의한 시스템의 디렉토리 마운트를
제어하는 파일을 수정하십시오.
<UL>
<A NAME="IDX8174"></A>
<A NAME="IDX8175"></A>
<LI><B>/etc/exports</B> 파일을 사용하는 시스템에서
NFS 클라이언트로의 <B>/afs</B> 디렉토리 반출이 사용 가능하도록
이 파일을 편집하십시오. 특정 사용자에게만 액세스 권한을 제공하기 위해
특정 NFS 클라이언트 시스템의 이름을 나열할 수 있습니다. 파일 형식에 대한
설명을 보려면 <B>exports(5)</B>에 대한 NFS 설명서 페이지를
참조하십시오.
<P>
<P>다음 예제는 NFS 클라이언트 시스템이 시스템의 <B>/afs</B>, <B>/usr</B> 및 <B>/usr2</B>
디렉토리를 마운트할 수 있게 합니다.
<P>
<PRE>   /afs
   /usr
   /usr2
</PRE>
<A NAME="IDX8176"></A>
<A NAME="IDX8177"></A>
</LI><LI><B>share</B> 명령을 사용하는 시스템 유형에서
<B>/afs</B> 디렉토리의 원격 마운트를 사용 가능하게 하는
<B>share</B> 명령어를 포함하도록 <B>/etc/dfs/dfstab</B>
파일 또는 동등 파일을 편집하십시오. 대부분의 분산에는 <B>/usr/sbin/share</B>와
같은 2진 파일이 포함되어 있습니다. 다음 예제 명령은 루트(<B>/</B>) 및
<B>/afs</B> 디렉토리의 원격 마운트를 사용 가능하게 합니다.
구문이 올바른지 확인하려면 <B>share</B> 명령에 대한 설명서 페이지를
참조하십시오.
<P>
<PRE>   share -F nfs -o rw -d "root" /
   share -F nfs -o rw -d "afs gateway" /afs
</PRE>
</LI></UL>
</LI><LI><B>afsd</B> 프로그램이 실행된 후에
표준 UNIX <B>exportfs</B> 명령을 호출하도록
시스템의 AFS 초기설정 파일을 편집하십시오. 일부 시스템
유형에서는 단계 <A HREF="#LITRANS-MOUNTFILE">4</A>에서 수정한
내용만으로 <B>/afs</B> 디렉토리를 통해 AFS 파일
공간을 반출하게 하지 못합니다. 왜냐하면 그 결과로 나타나는
구성 변경이 시스템 초기설정중에 <B>afsd</B>
프로그램이 실행되기 전에 수행되기 때문입니다.
<B>afsd</B> 프로그램이 실행된 후에만
<B>/afs</B> 디렉토리가 전체 AFS 파일
공간에 대한 마운트 포인트가 됩니다. 그 전에는 다른
디렉토리처럼 로컬 디렉토리에 불과합니다.
</LI><LI><A NAME="LIWQ605"></A>AFS 초기설정 파일에서 <B>afsd</B>
명령을 수정하여 <B>-rmtsys</B> 플래그를 포함시키십시오.
<P>
<P>IRIX 이외의 시스테 유형에서는 <I>AFS 빠른 시작</I>에서 캐쉬 관리
프로그램을 구성하기 위한 지침은 OPTIONS 변수 값을 정의하는
스크립트의 행에 <B>-rmtsys</B> 플래그를
추가하는 것과 같이 이 플래그를 추가하는 방법을 설명합니다.
<P>
<P>IRIX 시스템에서 AFS 초기설정 스크립트는 사용자가 AFS 확장을
커널에 통합하는 것에 대해 <I>AFS 빠른 시작</I> 지침에 지정된 것과 같이
<B>afsxnfs</B> 구성 변수를 활성화하는 경우
자동으로 <B>-rmtsys</B> 플래그를 추가합니다.
변수가 아직 활성화되지 않은 경우 다음 명령을 실행하십시오.
<P>
<PRE>
   # <B>/etc/chkconfig  -f  afsxnfs  on</B>
</PRE>
</LI><LI><B>(선택적)</B> 이 시스템에서 사용될 것으로
예상되는 NFS 클라이언트의 수에 따라 백그라운드 디먼의 수를
설정하기 위한 <B>-daemons</B> 인수와 같이
시스템의 초기설정 파일의 <B>afsd</B> 명령에
다른 인수를 추가하는 것이 유용할 수 있습니다. <I>AFS Administration Reference</I>에서
<A HREF="auagd015.htm#HDRWQ387">클라이언트 시스템 및 캐쉬 관리 프로그램 관리</A> 및 <B>afsd</B> 참조
페이지를 참조하십시오.
</LI><LI>기계를 재부트하십시오. 많은 시스템 유형에서 적절한 명령은
<B>shutdown</B>입니다. 이에 대해서는 운영 체제
관리자 안내서를 참조하십시오.
<P>
<PRE>   # <B>shutdown</B> <VAR>appropriate_options</VAR>
</PRE>
</LI></OL>
<A NAME="IDX8178"></A>
<A NAME="IDX8179"></A>
<P><H3><A NAME="Header_680" HREF="auagd002.htm#ToC_680">변환 기능을 사용 불가능 또는 사용 가능하게 하거나 선택적 기능을 설정하려면</A></H3>
<OL TYPE=1>
<LI>시스템에서 로컬 수퍼유저 <B>루트</B>가 아닌 경우
<B>su</B> 명령을 실행하여 이러한 권한을 얻으십시오.
<P>
<PRE>   % <B>su root</B>
   Password: <VAR>root_password</VAR>
</PRE>
</LI><LI><B>fs exportafs</B> 명령을 실행하십시오.
<P>
<PRE>   #
<B>fs exportafs nfs</B> [<B>-start</B> {<B>on</B> | <B>off</B>}} ]  [<B>-convert</B>
{<B>on</B> | <B>off</B>}]
                      [<B>-uidcheck</B> {<B>on</B> | <B>off</B>}]   [<B>-submounts</B>
{<B>on</B> | <B>off</B>}]
</PRE>
<P>
<DL>
<P><DT><B>-start
</B><DD>값이 <B>off</B>인 경우에는 변환 기능을 사용 불가능하게
하고 값이 <B>on</B>이면 사용 가능하게 합니다. 이 명령에서
설정한 모든 매개변수의 현재 설정을 표시하려면 이 인수를 생략하십시오.
<P><DT><B>-convert
</B><DD>NFS 클라이언트로 반출될 때 AFS 파일 및 디렉토리에 대한 UNIX 모드 비트의
두 번째 및 세 번째(<B>group</B> 및 <B>other</B>)
집합의 설정을 제어합니다. 이 값이 <B>on</B>인 경우
이들 비트는 <B>owner</B> 모드 비트와 일치하도록 설정됩니다.
그 값이 <B>off</B>이면 비트는 변경되지 않습니다. 이 인수가
생략된 경우 기본값은 <B>on</B>입니다.
<P><DT><B>-uidcheck
</B><DD><B>knfs</B> 명령의 실행자가 AFS UID와 일치하지 않는
그 <B>-id</B> 인수에 대한 값을 지정할 수 있는지 제어합니다.
<UL>
<LI>그 값이 <B>on</B>이면 <B>-id</B> 인수의 값은 실행자의 로컬 UID와 일치해야 합니다.
</LI><LI>값이 <B>off</B>이면 <B>knfs</B> 명령의 실행자는 <B>-id</B> 인수를 사용하여
로컬 수퍼유저 <B>루트</B>와 같이 NFS 클라이언트 시스템에 다른
로컬 UID를 가지고 있는 사용자에게 토큰을 지정할 수 있습니다.
</LI></UL>
<P>
<P>
<P>이 인수가 생략된 경우 기본값은 <B>off</B>입니다.
<P><DT><B>-submounts
</B><DD>변환 기계가 최상위 <B>/afs</B> 디렉토리 이외의
AFS 파일 공간에 디렉토리 마운트할 수 있는지 제어합니다.
그 값이 <B>on</B>이면 이러한 서브마운트가 허용됩니다.
그 값이 off이면 <B>/afs</B> 디렉토리의 마운트만 허용됩니다.
이 인수가 생략된 경우 기본값은 <B>off</B>입니다.
</DL>
</LI></OL>
<HR><H2><A NAME="HDRWQ606" HREF="auagd002.htm#ToC_681">NFS 클라이언트 시스템 구성</A></H2>
<P>다음 요구조건을 충족하는 모든 NFS 클라이언트 시스템은 NFS/AFS 변환기를
통해 AFS의 파일을 액세스할 수 있습니다. 이러한 시스템을 AFS 클라이언트
시스템으로 구성할 필요는 없습니다.
<UL>
<LI>이것은 로컬 디렉토리에서 NFS 마운트 변환 기계의 <B>/afs</B>
디렉토리에 있어야 하며 일반적으로 <B>/afs</B>라고도 합니다.
다음 지침은 NFS 클라이언트 시스템의 <B>/etc/fstab</B> 파일이나 동등 파일에 <B>mount</B> 명령을 추가하는 방법을
설명합니다.
<P>
<P>NFS 클라이언트가 변환 기계의 <B>/afs</B> 디렉토리를
마운트하는 디렉토리를 <B>/afs</B> 이외의 이름으로 지칭할 수
있습니다. 예를 들어 원래의 변환 기계를 액세스할 수 없는 경우 다른 변환 기계로
쉽게 전환하기 위해 둘 이상의 변환 기계의 <B>/afs</B> 디렉토리에
마운트할 수 있습니다. 일반적으로 사용하는 변환 기계에 대해 마운트
<B>/afs</B>를 명명하고 각 대체 변환 기계에 대한 마운트에
다른 이름을 사용하십시오.
<P>
<P><B>/afs</B> 이외의 디렉토리에 AFS 파일 공간을 마운트하기
위해서는 다른 작업이 필요합니다. 그러나 AFS 경로 이름 인수를 취하는 명령을
실행할 때는 상대 경로 이름이 아니라 <B>/afs</B>로 시작하는
전체 경로 이름을 지정해야 합니다. 예를 들어 변환 기계의 AFS 파일 공간이
NFS 클라이언트 시스템의 <B>/afs2</B>에 마운트되고 사용자가 다음
명령을 실행하여 AFS에 있는 현재 작업 디렉토리에 대한 ACL을 표시한다고
합시다.
<P>
<PRE>   % <B>fs listacl .</B>
</PRE>
<P>
<P>NFS 클라이언트의 <B>fs</B> 명령 인터프리터는 변환 기계의
캐쉬 관리 프로그램에 요청을 전달하기 전에 전체 경로 이름을 구성해야 합니다.
AFS 파일 공간은 <B>/afs2</B>에 마운트되므로 전체 파일 공간은
이 문자열로 시작됩니다. 그러나 변환 기계의 캐쉬 관리 프로그램은 <B>/afs2</B>라는
디렉토리를 찾을 수 없습니다. 왜냐하면 AFS 파일 공간의 해당 마운트가
<B>/afs</B>라고 지칭되기 때문입니다. 이 명령은 실패합니다.
실패를 막으려면 문자열 <B>/afs</B>로 시작하는 파일의 완전한
경로 이름을 제공하십시오.
</LI><LI>또한 이 시스템은 사전 읽기 및 지연된 쓰기를 처리함으로써 성능을
향상시키는 적절한 수의 NFS 클라이언트 <B>biod</B> 디먼을
실행해야 합니다. 대부분의 NFS 공급 업체에서는 이러한 네 개의 디먼을 실행하도록
권장하며 대부분의 NFS 초기설정 스크립트는 자동으로 이들 디먼을 시작합니다.
NFS 설명서를 참조하십시오.
</LI></UL>
<P>사용자가 AFS 명령을 실행할 수 있게 하기 위해 NFS 클라이언트 시스템은
지원되는 시스템 유형(AFS 2진 파일을 사용할 수 있는 유형)이어야 하며 AFS 명령
2진 파일을 액세스할 수 있어야 합니다. <I>AFS 릴리스 노트</I>에서는 각 릴리스의
지원되는 시스템 유형을 나열합니다.
<P>또한 AFSSERVER 및 AFSCONF 환경 변수는 <A HREF="#HDRWQ600">AFSSERVER 및 AFSCONF 환경 변수 설정</A>에서
설명하는 것처럼 적절히 설정되어야 합니다.
<P><H3><A NAME="Header_682" HREF="auagd002.htm#ToC_682">AFS를 액세스하도록 NFS 클라이언트 시스템을 구성하려면</A></H3>
<TABLE><TR><TD ALIGN="LEFT" VALIGN="TOP"><B>주:</B></TD><TD ALIGN="LEFT" VALIGN="TOP">다음 지침에 따라 NFS 사용자가 AFS 명령을 실행하게 할 수 있습니다.
이 기능을 사용하지 않으려면 단계 <A HREF="#LIWQ608">5</A> 및
단계 <A HREF="#LIWQ609">6</A>을 생략하십시오.
</TD></TR></TABLE>
<OL TYPE=1>
<LI>시스템에서 로컬 수퍼유저 <B>루트</B>가 아닌 경우
<B>su</B> 명령을 실행하여 이러한 권한을 얻으십시오.
<P>
<PRE>   % <B>su root</B>
   Password: <VAR>root_password</VAR>
</PRE>
</LI><LI>아직 수행하지 않은 경우 해당 시스템을 NFS 클라이언트 시스템으로 구성하십시오.
NFS 공급업체가 제공하는 지침을 따르십시오. NFS 클라이언트
디먼(<B>biod</B>)의 수는 시스템에서 예상되는 로드에 대해
적절해야 합니다. 일반적인 권장 개수는 4입니다.
</LI><LI>아직 없는 경우 시스템에 <B>/afs</B>라는 디렉토리를
작성하여 변환 기계의 <B>/afs</B> 디렉토리에 대한 마운트 포인트로 사용되게 하십시오. 다른 이름을 사용할 수 있으나 이 경우 이 절의
개요 부분에서 설명하는 제한이 적용됩니다.
<P>
<PRE>   # <B>mkdir /afs</B>
</PRE>
<A NAME="IDX8180"></A>
<A NAME="IDX8181"></A>
</LI><LI><A NAME="LIWQ607"></A>변환 기계의 <B>/afs</B> 디렉토리를 마운트하는
명령을 포함하도록 시스템의 파일 시스템 레지스트리 파일(<B>/etc/fstab</B> 또는 동등 파일)을 수정하십시오. <B>mount</B>
명령의 구문이 올바른지 확인하려면 운영 체제의 <B>mount(5)</B>
설명서 페이지를 참조하십시오. 다음 예제에는 많은 시스템 유형에서 적절하게
사용될 수 있는 옵션이 포함되어 있습니다.
<P>
<PRE>   mount -o hard,intr,timeo=300  <VAR>translator_machine</VAR>:/afs /afs
</PRE>
<P>
<P>여기서,
<P>
<DL>
<P><DT><B><TT>hard</TT>
</B><DD>NFS 서버(변환 기계)가 응답할 때까지 MFS 클라이언트가 NFS 요청을
시도함을 나타냅니다. 변환 기계를 사용할 경우 파일 조작 내용이 AFS 캐쉬
관리 프로그램으로도 전달되어야 하므로 NFS만 사용할 때보다 파일 조작에
시간이 오래 소요될 수 있습니다. 소프트 마운트를 사용할 경우 변환 기계로부터의
응답 지연으로 인해 요청이 중단될 수 있습니다. 많은 NFS 버전에서는 기본적으로
하드 마운트를 사용합니다. 여러분의 버전이 하드 마운트를 사용하지 않을 경우
이 옵션을 추가하는 것이 좋습니다.
<P><DT><B><TT>intr</TT>
</B><DD>사용자가 키보드 인터럽트 신호(예: &lt;<B>Ctrl-c</B>>)를
사용하여 변환 기계를 액세스할 수 없을 때 마운트를 중단할 수 있게 합니다.
<TT>hard</TT> 옵션이 사용될 경우에만 이 옵션을 포함시키십시오. 이 경우
변환 기계가 작동 중단될 때 연결이 자동으로 끊어지지 않습니다.
<P><DT><B><TT>timeo</TT>
</B><DD>클라이언트에서 요청 제한 시간이 되었다고 간주하기 전에 변환 기계가
NFS 클라이언트의 요청에 응답하기 위해 소요할 수 있는 최대 시간(1/10초 단위)을
설정합니다. 하드 마운트를 사용할 경우 이 옵션을 300과 같이 큰 수로 설정하면
변환 기계가 즉시 응답하지 않을 때 생성되는 다음과 같은 오류 메시지 발생
횟수를 줄일 수 있습니다.
<P>
<PRE>   NFS server <VAR>translator</VAR> is not responding, still trying
</PRE>
<P>
<P>
<P>소프트 마운트를 사용할 경우 제한 시간이 된 요청에 대해 리턴된 실제 오류
횟수가 줄어듭니다.
<P><DT><B><VAR>translator_machine</VAR>
</B><DD>그 <B>/afs</B> 디렉토리가 클라이언트 시스템의
<B>/afs</B> 디렉토리에 마운트될 변환 기계의 완전 규정화된
호스트 이름을 지정합니다.
</DL>
<P>
<TABLE><TR><TD ALIGN="LEFT" VALIGN="TOP"><B>주:</B></TD><TD ALIGN="LEFT" VALIGN="TOP">변환 기계의 <B>/afs</B> 디렉토리를
<B>/afs</B>가 아닌 NFS 클라이언트의 디렉토리에 마운트하려면
<B>mount</B> 명령에서 <TT>/afs</TT>의 두 번째 인스턴스를
대체 디렉토리 이름으로 바꾸십시오.
</TD></TR></TABLE>
</LI><LI><A NAME="LIWQ608"></A><B>(선택적)</B> 적절한 경우 시스템의
모든 사용자에 대해 AFSSERVER 환경 변수를 설정하도록 <B>/.AFSSERVER</B>
파일을 작성하십시오. 자세한 정보를 보려면 <A HREF="#HDRWQ600">AFSSERVER 및 AFSCONF 환경 변수 설정</A>을
참조하십시오.
파일에 단일 행을 배치하고 원격 실행 프로그램을 작동할 변환 기계의
완전 규정화된 호스트 이름을 지정하십시오. 사용자가 토큰을 처리하는
명령을 실행할 수 있게 하려면 시스템은 단계 <A HREF="#LIWQ607">4</A>에서
<VAR>translator_machine</VAR>으로 명명된 시스템이어야 합니다.
</LI><LI><A NAME="LIWQ609"></A><B>(선택적)</B> 적절한 경우 시스템의
모든 사용자에 대해 AFSCONF 환경 변수를 설정하도록 <B>/.AFSCONF</B>
파일을 작성하십시오. 자세한 정보를 보려면 <A HREF="#HDRWQ600">AFSSERVER 및 AFSCONF 환경 변수 설정</A>을
참조하십시오.
파일에 단일 행을 배치하고 <B>CellServDB</B> 및
<B>ThisCell</B> 파일이 위치하는 디렉토리의 이름을 지정하십시오.
이들 파일에 대해 중앙 갱신 원본(일반적으로 <B>/afs/</B><VAR>cellname</VAR><B>/common/etc</B>)을
사용하는 경우 여기에 명명하십시오.
</LI></OL>
<HR><H2><A NAME="HDRWQ610" HREF="auagd002.htm#ToC_683">사용자 계정 구성</A></H2>
<P>NFS 사용자가 비인증 사용자로서 AFS를 액세스하는 데 필요한 요구조건은
없습니다. 그러나 더 많은 AFS 기능을 활용하려면 지정한 요구조건을 충족해야
합니다.
<UL>
<LI>인증 사용자로서 AFS를 액세스하려면 AFS에서 인증을 받아야 하며
이를 위해서는 보호 및 인증 데이터베이스의 항목이 필요합니다.
</LI><LI>파일을 작성하고 저장하려면 필요한 ACL 권한이 필요합니다. 개인 파일의
저장장소에 대해 홈 디렉토리를 제공하는 경우 전용 볼륨을 작성하고 AFS
파일 공간의 사용자 홈 디렉토리 위치에 이를 마운트하는 것이 일반적입니다.
</LI><LI>AFS 명령을 실행하려면 다음과 같은 여러 가지 추가 요구조건을 충족해야 합니다.
<UL>
<LI>지원되는 시스템 유형을 가지며 AFS 명령 2진 파일을 액세스할 수 있는
NFS 클라이언트 시스템에서 작업해야 합니다.
</LI><LI>그 명령 쉘에서는 <A HREF="#HDRWQ600">AFSSERVER 및 AFSCONF 환경 변수 설정</A>에서 설명하는 것처럼
AFSSERVER 및 AFSCONF 환경 변수에 대한 값을 정의해야 합니다. NFS 클라이언트
시스템의 루트 디렉토리에 <B>/.AFSSERVER</B> 및
<B>/.AFSCONF</B> 파일을 작성하여 변수를 정의하는 것이 가장
간단하지만 각 사용자의 쉘 초기설정 파일(<B>.cshrc</B> 또는
동등 파일)에 변수를 설정하거나 각 사용자의 홈 디렉토리에
<B>.AFSSERVER</B> 및 <B>.AFSCONF</B>라는
파일을 작성할 수도 있습니다.
</LI><LI>이들은 AFS 보호 및 인증 데이터베이스에 항목을 가지고 있으므로 명령이
AFS 권한을 요구할 경우 인증을 받을 수 있습니다. 그 대신 다른 명령은
변환 기계에 로컬 <B>루트</B> ID가 있다고 가정해야 합니다.
자세한 설명을 보려면 <A HREF="#HDRWQ601">AFSSERVER 변수</A>를 참조하십시오.
</LI><LI>그 PATH 환경 변수에는 적절한 AFS 2진 파일로의 경로 이름이 포함되어야
합니다. 사용자가 다른 시스템 유형을 가진 NFS 클라이언트 시스템에서 작업하는
경우 경로 이름에 실제 시스템 유형 이름 대신 <B>@sys</B>
변수를 포함시키십시오.
</LI></UL>
</LI></UL>
<P><H3><A NAME="Header_684" HREF="auagd002.htm#ToC_684">AFS 명령을 실행하기 위해 사용자 계정을 구성하려면</A></H3>
<OL TYPE=1>
<LI>보호 및 인증 데이터베이스에서 사용자에 대한 항목을 작성하거나 완전한
AFS 계정을 작성하십시오. <A HREF="auagd017.htm#HDRWQ449">uss 명령 집합을 사용한 사용자 계정 작성 및 삭제</A> 또는 <A HREF="auagd018.htm#HDRWQ491">사용자 계정 관리</A>에서
계정 작성에 대한 지침을 참조하십시오.
</LI><LI><A NAME="LIWQ611"></A><B>/afs/</B><VAR>cellname</VAR><B>/</B><VAR>sysname</VAR><B>/usr/afsws/bin</B>과
같이 AFS 2진 파일의 경로 이름을 포함하도록 사용자의 PATH 환경 변수를
수정하십시오. 사용자가 다른 시스템 유형을 가진 NFS 클라이언트 시스템에서
작업하는 경우 특정 <VAR>sysname</VAR> 값을 <B>@sys</B> 변수로 바꾸는 것을 고려해 보십시오. PATH 변수는 보통 로그인 또는
쉘 초기설정 파일(예: <B>.login</B> 또는 <B>.cshrc</B> 파일)에 정의되어 있습니다.
</LI><LI><B>(선택적)</B> 적절한 경우 AFSSERVER 및 AFSCONF 환경 변수를
설정하십시오. 사용자가 작업하고 있는 NFS 클라이언트 시스템이 그 루트
디렉토리에 <B>/.AFSSERVER</B> 및 <B> /.AFSCONF</B> 파일을 가지고 있지 않거나 사용자 특정 값으로 이들 설정을
덮어쓰게 하려는 경우 이 작업이 필요합니다.
<P>
<P>사용자의 로그인 또는 쉘 초기설정 파일에 변수를 정의하거나 사용자의 홈
디렉토리에 파일 <B>.AFSSERVER</B> 및
<B>.AFSCONF</B>를 작성하십시오.
<P>
<P>AFSSERVER 변수의 경우 원격 실행 프로그램을 작동할 변환 기계의 완전
규정화된 호스트 이름을 지정하십시오.
AFSCONF 변수의 경우 <B>CellServDB</B> 및
<B>ThisCell</B> 파일이 위치하는 디렉토리의 이름을 지정하십시오.
이들 파일에 대해 중앙 갱신 원본(일반적으로 <B>/afs/</B><VAR>cellname</VAR><B>/common/etc</B>)을
사용하는 경우 여기에 명명하십시오.
</LI><LI>단계 <A HREF="#LIWQ611">2</A>에서 정의한 경로 이름에
<B>@sys</B> 변수가 포함된 경우 사용자에게 AFS 명령을 실행하기
전에 그 시스템 이름이 제대로 정의되어 있는지 확인하도록 지시하십시오.
다음 명령이 실행됩니다.
<P>
<PRE>   % <B>fs sysname</B>
</PRE>
</LI></OL>
<HR><H2><A NAME="HDRWQ612" HREF="auagd002.htm#ToC_685">지원되지 않는 NFS 클라이언트 시스템에서 인증 받기</A></H2>
<P><B>knfs</B> 명령을 사용하면 지원되지 않는 시스템 유형(AFS
2진 파일을 사용할 수 없는 시스템)의 NFS 클라이언트에서 작업하고 있을 때
AFS의 인증을 받을 수 있습니다. 이를 통해 다른 AFS 사용자와 같은 수준까지
AFS 파일 트리를 액세스할 수 있게 됩니다. 그러나 지원되는 시스템 유형의
NFS 클라이언트 시스템에서만 가능한 AFS 명령의 실행은 수행할 수 없습니다.
<P>지원되지 않는 시스템 유형에서 인증을 받으려면 변환 기계와 연결하고
(<B>텔넷</B>과 같은 기능 사용) <B>klog</B>
명령을 실행하여 진행될 NFS 세션 동안 접속하려는 모든 셀에 대한 토큰을
얻으십시오. 그런 다음 <B>knfs</B> 명령을 실행하여 NFS 세션과
연관된 자격사항 구조에 토큰을 저장하십시오. 캐쉬 관리 프로그램은 NFS 세션에서
시작된 AFS 액세스 요청을 수행할 때 이 토큰을 사용합니다.
<P>특이하게, 자격사항 구조는 특정 NFS 클라이언트 시스템의 특정 로컬 UID와
연관된 프로세스 인증 그룹(PAG) 번호에 의해 식별됩니다. 기본적으로 자격사항
구조에 기록된 NFS UID는 변환 기계의 로컬 UID와 동일합니다. 변환 기계의 관리자가
<B>fs exportafs</B> 명령의 <B>-uidcheck</B>
인수를 사용하여 UID 확인 기능을 설정하지 않는 한 <B>-id</B>
인수를 포함시켜 대체 NIF UID를 지정할 수 있습니다. 이러한 경우
<B>-id</B> 인수의 값은 변환 기계의 로컬 UID와 일치해야
합니다 (<B>-id</B> 인수를 포함시켜야 할 시점이 없음).
UID 일치를 수행하여 다른 사용자가 사용자의 자격사항 구조에 고의적으로나
우연하게 자신들의 토큰을 배치하지 못하게 하십시오. 그러나 이것은 셀의 관리자가
NFS 클라이언트의 로컬 UID를 변환 기계의 로컬 UID와 일치하도록 설정해야
함을 의미합니다. 또한 지원되는 NFS 클라이언트에 대해 <B>klog</B> 명령을 실행하여 인증을 받을 수 없게 되며 결국 모든 NFS 사용자는
<B>knfs</B> 명령을 사용해야 합니다. <A HREF="#HDRWQ604">선택적 변환 기능 제어</A>를 참조하십시오.
<P><B>knfs</B> 명령을 실행한 후에 AFS로의 액세스 권한을 얻은
NFS 클라이언트에서 작업을 시작할 수 있습니다. 작업이 끝나면 변환 기계에 대해
다시 <B>knfs</B> 명령을 실행하여 토큰을 파괴하는 것이
바람직하며 이 때에는 <B>-unlog</B> 플래그를 사용하십시오.
변환 기계로 연결된 상태를 그대로 유지하는 것이 더 간단하지만 항상 원래 연결을
닫아야만 새 연결을 설정할 수 있습니다.
<P>NFS 클라이언트 시스템이 지원되는 시스템 유형이고 이 시스템에 대해
AFS 명령을 실행하려는 경우 <B>knfs</B> 명령에
<B>-sysname</B> 인수를 포함시키십시오. 변환 기계의 원격
실행 프로그램 디먼은 사용자가 NFS 클라이언트 시스템에 대해 실행하는 AFS 명령을
실행할 때 경로 이름에서 그 값으로 <B>@sys</B> 변수를 대체합니다.
PATH 환경 변수에서 AFS 2진 파일이 있는 디렉토리에 대한 경로 이름에
<B>@sys</B> 변수를 사용하는 경우 (권장) 이 인수를 설정하면
그 시스템 유형이 변환 기계의 시스템 유형과 다른 경우에도 원격 실행 프로그램
디먼이 사용자의 NFS 클라이언트 시스템에 적절한 AFS 2진 파일을 액세스할 수
있게 됩니다.
<P><B>knfs</B> 명령(또는 NFS 클라이언트 시스템이 지원되는
시스템 유형인 경우 이 시스템에 대해 <B>klog</B> 명령)을
실행하지 않는 경우 AFS에 대해 인증을 받지 못합니다. 비인증 액세스에 대한
설명을 보려면 <A HREF="#HDRWQ599">비인증 또는 인증 AFS 액세스 사용 가능화</A>를 참조하십시오.
<A NAME="IDX8182"></A>
<A NAME="IDX8183"></A>
<P><H3><A NAME="Header_686" HREF="auagd002.htm#ToC_686">knfs 명령을 사용하여 인증을 받으려면</A></H3>
<OL TYPE=1>
<LI><B>텔넷</B>과 같은 프로그램을 사용하여 콘솔이나 원격으로
적절한 변환 기계에 로그온하십시오.
</LI><LI>NFS 클라이언트에서 작업하는 동안 액세스하려는 모든 셀에 대한 토큰을
얻으십시오. AFS 수정 로그인은 기본적으로 변환 기계의 로컬 셀에 대한
토큰을 얻습니다. 원하는 경우 <B>klog</B> 명령을 사용하여
다른 셀에 대한 토큰을 얻으십시오.
</LI><LI><B>knfs</B> 명령을 실행하여 이전 단계에서 얻은 토큰을
저장하기 위한 변환 기계의 커널 메모리에 자격사항 구조를 작성하십시오.
<B>-id</B> 인수를 포함시켜 변환 기계의 로컬 UID와 다른
NFS 클라이언트의 UID에 해당 구조를 연관지으십시오. 이것은 변환 기계의
관리자가 변환 기계에 대한 UID 확인 기능을 설정하지 않는 한 가능합니다.
<A HREF="#HDRWQ604">선택적 변환 기능 제어</A>를 참조하십시오. NFS 클라이언트 시스템이
지원되는 시스템 유형이고 이에 대해 AFS 명령을 실행하려는 경우
<B>-sysname</B> 인수를 포함시켜 그 시스템 유형을 지정하십시오.
<P>
<PRE>   % <B>knfs -host</B> &lt;<VAR>host&nbsp;name</VAR>>  [<B>-id</B> &lt;<VAR>user&nbsp;ID&nbsp;(decimal)</VAR>>]  [<B>-sysname</B>  &lt;<VAR>host's&nbsp;'@sys'&nbsp;value</VAR>>]
</PRE>
<P>
<P>여기서,
<P>
<DL>
<P><DT><B>-host
</B><DD>작업중인 NFS 클라이언트 시스템의 완전 규정화된
호스트 이름을 지정합니다.
<P><DT><B>-id
</B><DD>NFS 클라이언트 시스템의 로컬 UID 번호가 변환 기계의
로컬 UID와 다른 경우 토큰과 연관지을 로컬 UID를 지정합니다.
이 인수가 생략되면 토큰은 변환 기계의 로컬 UID와 일치하는
NFS UID과 연관됩니다. 두 경우 모두 NFS 클라이언트 소프트웨어는
변환 기계의 캐쉬 관리 프로그램에 AFS 액세스 요청을 전달할 때
이 요청에 NFS UID를 붙입니다.
<P><DT><B>-sysname
</B><DD>로컬 시스템의 원격 실행 프로그램 디먼이 NFS 클라이언트
시스템(지원되는 시스템 유형이어야 함)에서 실행된 AFS 명령을
실행할 때 경로 이름에서 <B>@sys</B> 변수를
대체할 값을 지정합니다.
</DL>
<P>
<P>다음 오류 메시지는 변환 기계의 관리자가 UID 확인 기능을 사용 가능하게 했으며
변환 기계의 로컬 UID와 다른 값을 사용자가 제공했음을 나타냅니다.
<P>
<PRE>
   knfs: Translator in 'passwd sync' mode; remote uid must be the same as local uid
</PRE>
</LI><LI>원하는 경우 변환 기계로의 연결과 NFS 클라이언트 시스템에 대한
작업을 종료하십시오.
</LI></OL>
<A NAME="IDX8184"></A>
<P><H3><A NAME="Header_687" HREF="auagd002.htm#ToC_687">knfs 명령을 사용하여 토큰을 표시하려면</A></H3>
<OL TYPE=1>
<LI><B>텔넷</B>과 같은 프로그램을 사용하여 콘솔이나 원격으로
적절한 변환 기계에 로그온하십시오.
</LI><LI><B>-tokens</B> 플래그와 함께 <B>knfs</B>
명령을 실행하여 변환 기계의 로컬 UID와 일치하는 NFS UID나
<B>-id</B> 인수가 지정한 NFS UID와 연관된 토큰을 표시하십시오.
<P>
<PRE>   % <B>knfs -host</B> &lt;<VAR>host&nbsp;name</VAR>>  [<B>-id</B> &lt;<VAR>user&nbsp;ID&nbsp;(decimal)</VAR>>] <B>-tokens</B>
</PRE>
<P>
<P>여기서,
<P>
<DL>
<P><DT><B>-host
</B><DD>작업중인 NFS 클라이언트 시스템의 완전 규정화된 호스트
이름을 지정합니다.
<P><DT><B>-id
</B><DD>NFS 클라이언트 시스템의 로컬 UID 번호가 변환 기계의
로컬 UID와 다른 경우 토큰을 표시할 로컬 UID를 지정합니다.
이 인수가 생략되면 토큰은 변환 기계의 로컬 UID와 일치하는
NFS UID에 대한 토큰이 됩니다.
<P><DT><B>-tokens
</B><DD>토큰을 표시합니다.
</DL>
</LI><LI>원하는 경우 변환 기계와의 연결을 닫으십시오.
</LI></OL>
<A NAME="IDX8185"></A>
<P><H3><A NAME="Header_688" HREF="auagd002.htm#ToC_688">knfs 명령을 사용하여 토큰을 버리려면</A></H3>
<OL TYPE=1>
<LI><B>knfs</B> 명령을 실행한 후에 변환 기계로의 연결을
닫은 경우 다시 여십시오.
</LI><LI><B>-unlog</B> 플래그를 사용하여 <B>knfs</B>
명령을 실행하십시오.
<P>
<PRE>   % <B>knfs -host</B>  &lt;<VAR>host&nbsp;name</VAR>>  [<B>-id</B> &lt;<VAR>user&nbsp;ID&nbsp;(decimal)</VAR>>]
<B>-unlog</B>
</PRE>
<P>
<P>여기서,
<P>
<DL>
<P><DT><B>-host
</B><DD>작업중인 NFS 클라이언트 시스템의 완전 규정화된
호스트 이름을 지정합니다.
<P><DT><B>-id
</B><DD>NFS 클라이언트 시스템의 로컬 UID 번호가 변환 기계의
로컬 UID와 다른 경우 연관된 토큰을 버릴 로컬 UID를 지정합니다.
이 인수가 생략되면 변환 기계의 로컬 UID와 일치하는 NFS UID와
연관된 토큰은 삭제됩니다.
<P><DT><B>-unlog
</B><DD>토큰을 버립니다.
</DL>
</LI><LI>원하는 경우 변환 기계와의 연결을 닫으십시오.
</LI></OL>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">페이지의 맨 위</A> &#124; <A HREF="auagd021.htm">이전 페이지</A> &#124; <A HREF="auagd023.htm">다음 페이지</A> &#124; <A HREF="auagd002.htm#ToC">목차</A> &#124; <A HREF="auagd026.htm#HDRINDEX">색인</A> &#93;</B>
<!-- Begin Footer Records  ========================================== -->
<P><HR><B>
<br>&#169; <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved
</B>
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
